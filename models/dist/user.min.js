"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,r,n){return r&&_defineProperties(e.prototype,r),n&&_defineProperties(e,n),e}var bcrypt=require("bcryptjs"),sqlite3=require("sqlite3").verbose(),db=new sqlite3.Database("./db/database.sqlite");db.serialize(function(){db.run("CREATE TABLE IF NOT EXISTS users (\n        id INTEGER PRIMARY KEY AUTOINCREMENT, \n        username TEXT UNIQUE,                 \n        password TEXT                     \n    )")});var User=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"register",value:function(t,r){var s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(bcrypt.hash(r,10));case 2:return s=e.sent,e.abrupt("return",new Promise(function(r,n){db.run("INSERT INTO users (username, password) VALUES (?, ?)",[t,s],function(e){e&&n(e),r(this.lastID)})}));case 4:case"end":return e.stop()}})}},{key:"findByUsername",value:function(r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(n,t){db.get("SELECT * FROM users WHERE username = ?",[r],function(e,r){e&&t(e),n(r)})}));case 1:case"end":return e.stop()}})}},{key:"validatePassword",value:function(r,n){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bcrypt.compare(n,r.password));case 1:case"end":return e.stop()}})}}]),e}();module.exports=User;
//# sourceMappingURL=user.min.js.map
